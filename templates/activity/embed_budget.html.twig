{% embed '@AdminLTE/Widgets/box-widget.html.twig' %}
    {% import "macros/progressbar.html.twig" as progress %}
    {% block box_title %}{{ 'label.budget'|trans }}{% endblock %}
    {% block box_attributes %}id="budget_box"{% endblock %}
    {% block box_body %}
        {% set params = {
            '%activity%': activity.name,
            '%project%': '-',
            '%customer%': '-',
            '%records%': stats.recordAmount,
            '%duration%': stats.recordDuration|duration
        } %}

        {% set currency = null %}
        {% if activity.project is not null %}
            {% set currency = activity.project.customer.currency %}
        {% endif %}

        {% if activity.project is not null %}
            {% set params = params|merge({
                '%project%': activity.project.name,
                '%customer%': activity.project.customer.name,
            }) %}
        {% endif %}

        <p>
            {{ 'admin_activity.short_stats'|trans(params) }}
            {{ 'label.rate_internal'|trans }}: {{ stats.recordInternalRate|money(currency) }}.
        </p>

        {{ progress.progressbar(activity.budget, stats.recordRate, 'label.budget'|trans, stats.recordRate|money(currency) ~ ' / ' ~ activity.budget|money(currency) ) }}
        {{ progress.progressbar(activity.timeBudget, stats.recordDuration, 'label.timeBudget'|trans, stats.recordDuration|duration ~ ' / ' ~ activity.timeBudget|duration ) }}
    {% endblock %}
{% endembed %}
